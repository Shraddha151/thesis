(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{105:function(e,t){},115:function(e,t){},117:function(e,t){},125:function(e,t,a){},132:function(e,t,a){},133:function(e,t,a){},134:function(e,t,a){},135:function(e,t,a){},136:function(e,t,a){},137:function(e,t,a){},138:function(e,t,a){},139:function(e,t,a){},141:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(24),o=a.n(l),c=a(3),i=a(4),s=a(30),m=a.n(s),u=a(21),d=a.n(u),p=a(6),g=a(20),h=a(31),E=a.n(h),b=a(32),v=a.n(b),f=a(33),y=a.n(f),w=a(34),x=a.n(w),I=(a(125),a(142));var C=e=>{const[t,a]=Object(n.useState)(!1),[l,o]=Object(n.useState)(null),[i,s]=Object(n.useState)(null),[m,u]=Object(n.useState)(null);Object(n.useEffect)(()=>{const e=localStorage.getItem("authTicket");if(e)try{const t=Object(g.a)(e);o(t)}catch(t){console.error("Invalid token:",t),o(null)}},[]),Object(n.useEffect)(()=>{(async()=>{try{var e;const t=await I.a.get(`https://api.openweathermap.org/data/2.5/weather?q=${(null===l||void 0===l?void 0:l.city)||"Islamabad"}&units=metric&appid=37e78c3096e576c4b3758d158358e03b`);(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.main)&&(s(t.data.main.temp.toFixed(1)),u(t.data.main.humidity.toFixed(1)))}catch(t){console.error("Error fetching weather:",t)}})()},[l]);return r.a.createElement("header",null,r.a.createElement("div",{className:"top-bar"},r.a.createElement("div",{className:"top-left"},(()=>{let e=r.a.createElement(r.a.Fragment,null);return l&&(e=r.a.createElement("span",null,r.a.createElement("span",null,null===l||void 0===l?void 0:l.city," "),null!==i&&r.a.createElement("span",null," \ud83c\udf21\ufe0f ",i,"\xb0C "),null!==m&&r.a.createElement("span",null," \ud83d\udca7 ",m,"\xb0C"))),e})()),!l&&r.a.createElement("div",{className:"top-right"},r.a.createElement(c.b,{to:"#"},"\ud83c\udf10 English"),r.a.createElement(c.b,{to:"/login"},"\ud83d\udc64 Log in"))),r.a.createElement("nav",{className:"nav-bar"},r.a.createElement(c.b,{to:"/",className:"logo"},"WebRTC"),r.a.createElement("div",{className:"menu-toggle",onClick:()=>{a(!t)}},r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null)),r.a.createElement("div",{className:"nav-links "+(t?"open":"")},r.a.createElement(c.b,{to:"/"},"Home"),l&&r.a.createElement(c.b,{to:"/rooms"},"Rooms"),r.a.createElement(c.b,{to:"/doc"},"Documentation"),r.a.createElement(c.b,{to:"/aboutus"},"About Us")),r.a.createElement("div",{className:"cta"},l?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{style:{display:"block",textAlign:"center"}},"\ud83d\udc64 ",l.username),r.a.createElement("button",{style:{minWidth:"140px"},className:"btn btn-logout",onClick:()=>{localStorage.removeItem("authTicket"),o(null),(null===e||void 0===e?void 0:e.history)?e.history.push("/login"):window.location.href="/login"}},"Logout")):r.a.createElement(c.b,{to:"/register",className:"btn"},"Registration"))))};var k=()=>r.a.createElement("footer",{className:"footer"},r.a.createElement("div",{className:"footer-container"},r.a.createElement("div",{className:"footer-column"},r.a.createElement("h3",null,"WebRTC"),r.a.createElement("p",null,"Empowering real-time communication with seamless video, audio, and data sharing.")),r.a.createElement("div",{className:"footer-column"},r.a.createElement("h4",null,"Quick Links"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(c.b,{to:"/"},"Home")),r.a.createElement("li",null,r.a.createElement(c.b,{to:"/connect"},"Connect")),r.a.createElement("li",null,r.a.createElement(c.b,{to:"/doc"},"Documentation")),r.a.createElement("li",null,r.a.createElement(c.b,{to:"/aboutus"},"About Us")))),r.a.createElement("div",{className:"footer-column"},r.a.createElement("h4",null,"Contact Us"),r.a.createElement("p",null,"\ud83d\udcde ",r.a.createElement("a",{href:"tel:+18556722788"},"1-855-672-2788")),r.a.createElement("p",null,"\ud83d\udce7 ",r.a.createElement("a",{href:"mailto:support@webrtc.com"},"support@webrtc.com")))),r.a.createElement("div",{className:"footer-bottom"},r.a.createElement("p",null,"\xa9 2024 WebRTC. All Rights Reserved.")));const N=I.a.create({baseURL:"/api/"});N.interceptors.request.use(e=>{const t=localStorage.getItem("authTicket");return t&&(e.headers.Authorization=t),e},e=>Promise.reject(e));var j=N;const S=async()=>{try{const e=await j.get("auth/users");return 200==e.status&&e.data}catch(e){console.error("Error creating room:",e)}return!1};p.a.div`
  height: 100vh;
  width: 20%;
`,p.a.div`
  height: 100vh;
  width: 100%;
`,p.a.div`
  margin: 3px;
  padding: 5px;
  height: 27px;
  width: 98%;
  background-color: rgba(255, 226, 104, 0.1);
  margin-top: -8.5vh;
  filter: brightness(1);
  z-index: 1;
  border-radius: 6px;
`,p.a.div`
  margin: 3px;
  padding: 5px;
  height: 16px;
  width: 98%;
  margin-top: -6vh;
  filter: brightness(1);
  z-index: 1;
  border-radius: 6px;
  display: flex;
  justify-content: center;
`,p.a.img`
  cursor: pointer;
  height: 25px;
`,p.a.img`
  height: 15px;
  text-align: left;
  opacity: 0.5;
`,p.a.video`
  width: 100%;
  position: static;
  border-radius: 10px;
  overflow: hidden;
  margin: 1px;
  border: 5px solid gray;
`;a(132);var O=e=>r.a.createElement("div",null,r.a.createElement(C,e),r.a.createElement("section",{className:"hero"},r.a.createElement("div",{className:"hero-content"},r.a.createElement("h1",null,"Real-Time Communication with WebRTC"),r.a.createElement("p",null,"Empowering your applications with seamless video, audio, and data sharing. Experience the future of connectivity and collaboration."),r.a.createElement(c.b,{to:"/login",className:"cta-btn"},"Get Started")),r.a.createElement("div",{className:"hero-image"},r.a.createElement("img",{src:"hero-image.png",alt:"WebRTC Connectivity"}))),r.a.createElement("section",{id:"features",className:"main-section"},r.a.createElement("h2",null,"Why Choose WebRTC?"),r.a.createElement("p",{className:"main-description"},"Discover the powerful features of WebRTC that enable real-time and secure communication."),r.a.createElement("div",{className:"features-container"},r.a.createElement("div",{className:"feature-box"},r.a.createElement("img",{src:"videocall.png",alt:"Video Call"}),r.a.createElement("h3",null,"High-Quality Video Calls"),r.a.createElement("p",null,"Experience ultra-clear, low-latency video and audio calls directly in your browser.")),r.a.createElement("div",{className:"feature-box"},r.a.createElement("img",{src:"core.png",alt:"Data Transfer"}),r.a.createElement("h3",null,"Secure Data Transfer"),r.a.createElement("p",null,"Safely exchange data with end-to-end encryption and advanced security protocols.")),r.a.createElement("div",{className:"feature-box"},r.a.createElement("img",{src:"scalability.png",alt:"Scalability"}),r.a.createElement("h3",null,"Highly Scalable"),r.a.createElement("p",null,"Built for scale, WebRTC can handle large user bases with efficient bandwidth usage.")))),r.a.createElement(k,null)),R=(a(133),a(14));var D=e=>{const[t,a]=Object(n.useState)({email:"",password:""}),[l,o]=Object(n.useState)({}),i=e=>{a({...t,[e.target.name]:e.target.value}),o({...l,[e.target.name]:""})};return r.a.createElement("div",null,r.a.createElement(C,null),r.a.createElement("section",{className:"login-section"},r.a.createElement("div",{className:"login-container"},r.a.createElement("form",{onSubmit:async a=>{a.preventDefault();const n=(()=>{const e={};return t.email.trim()?/\S+@\S+\.\S+/.test(t.email)||(e.email="Please enter a valid email address."):e.email="Email is required.",t.password.trim()?t.password.length<6&&(e.password="Password must be at least 6 characters long."):e.password="Password is required.",e})();if(Object.keys(n).length>0)return void o(n);let r=await(async(e,t)=>{try{const a=await j.post("/auth/login",{email:e,password:t});if(a.data.ticket)return localStorage.setItem("authTicket",a.data.ticket),console.log("Login successful"),a.data}catch(n){var a;return console.error("Login failed:",(null===(a=n.response)||void 0===a?void 0:a.data)||n.message),null}})(t.email,t.password);(null===r||void 0===r?void 0:r.ticket)?e.history.push("/rooms"):R.a.fail("Please check your details",3e3,()=>{})}},r.a.createElement("div",{className:"input-group"},r.a.createElement("label",{htmlFor:"email"},"Email Address"),r.a.createElement("input",{onChange:i,type:"email",id:"email",name:"email",placeholder:"Enter your email",required:!0})),r.a.createElement("div",{className:"input-group"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{onChange:i,type:"password",id:"password",name:"password",placeholder:"Enter your password",required:!0})),r.a.createElement("button",{type:"submit",className:"btn-login"},"Log In")),r.a.createElement("p",{className:"signup-text"},"Don't have an account? ",r.a.createElement(c.b,{to:"/register"},"Sign up here")))),r.a.createElement(k,null))};a(134);var T=e=>{const[t,a]=Object(n.useState)({username:"",email:"",password:"",city:""}),[l,o]=Object(n.useState)({}),i=e=>{a({...t,[e.target.name]:e.target.value}),o({...l,[e.target.name]:""})};return r.a.createElement("div",null,r.a.createElement(C,null),r.a.createElement("section",{className:"register-section"},r.a.createElement("div",{className:"register-container"},r.a.createElement("h2",null,"Create Your Account"),r.a.createElement("form",{onSubmit:async a=>{console.log("======== submitting ========="),a.preventDefault();const n=(()=>{const e={};return t.username.trim()||(e.username="Username is required."),t.email.trim()?/\S+@\S+\.\S+/.test(t.email)||(e.email="Please enter a valid email address."):e.email="Email is required.",t.city.trim()?t.city.length<3&&(e.password="City must be at least 3 characters long."):e.password="Password is required.",t.password.trim()?t.password.length<6&&(e.password="Password must be at least 6 characters long."):e.password="Password is required.",e})();if(Object.keys(n).length>0)return void o(n);console.log("Form submitted:",t);const r=await(async(e,t,a,n)=>{try{const r=await j.post("auth/register",{username:e,email:t,password:a,city:n});return console.log("Room created successfully:",r),r}catch(r){console.error("Error creating room:",r)}return!1})(t.username,t.email,t.password,t.city);200==(null===r||void 0===r?void 0:r.status)?(R.a.success("User registered Successfully",3e3,()=>{}),e.history.push("/login")):R.a.success("User register failed",3e3,()=>{})}},r.a.createElement("div",{className:"input-group"},r.a.createElement("label",{htmlFor:"username"},"User Name"),r.a.createElement("input",{type:"text",id:"username",name:"username",placeholder:"Enter username",value:t.username,onChange:i,required:!0})),r.a.createElement("div",{className:"input-group"},r.a.createElement("label",{htmlFor:"email"},"Email Address"),r.a.createElement("input",{type:"email",id:"email",name:"email",placeholder:"Enter your email",value:t.email,onChange:i,required:!0})),r.a.createElement("div",{className:"input-group"},r.a.createElement("label",{htmlFor:"email"},"City Name"),r.a.createElement("input",{type:"text",id:"city",name:"city",placeholder:"Enter your city",value:t.city,onChange:i,required:!0})),r.a.createElement("div",{className:"input-group"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",id:"password",name:"password",placeholder:"Create a password",value:t.password,onChange:i,required:!0})),r.a.createElement("div",{className:"input-group"},r.a.createElement("label",{htmlFor:"confirm-password"},"Confirm Password"),r.a.createElement("input",{type:"password",id:"confirm-password",name:"confirmPassword",placeholder:"Confirm your password",value:t.confirmPassword,onChange:i,required:!0})),r.a.createElement("button",{type:"submit",className:"btn-register"},"Register")),r.a.createElement("p",{className:"login-text"},"Already have an account? ",r.a.createElement(c.b,{to:"/login"},"Log in here")))),r.a.createElement(k,null))};a(135);var F=e=>r.a.createElement("div",null,r.a.createElement(C,e),r.a.createElement("section",{id:"about",className:"about-section"},r.a.createElement("div",{className:"about-container"},r.a.createElement("h2",null,"About Us"),r.a.createElement("p",null,"At ",r.a.createElement("strong",null,"WebRTC"),", we are committed to providing seamless real-time communication solutions for video, audio, and data sharing. Our mission is to empower developers and businesses with cutting-edge technology to build secure and scalable applications."),r.a.createElement("div",{className:"about-content"},r.a.createElement("div",{className:"about-card"},r.a.createElement("h3",null,"\ud83d\ude80 Our Mission"),r.a.createElement("p",null,"To simplify real-time communication technology and make it accessible to everyone across the globe.")),r.a.createElement("div",{className:"about-card"},r.a.createElement("h3",null,"\ud83d\udca1 Our Vision"),r.a.createElement("p",null,"Innovating and delivering secure, high-performance communication solutions for modern applications.")),r.a.createElement("div",{className:"about-card"},r.a.createElement("h3",null,"\ud83e\udd1d Our Values"),r.a.createElement("p",null,"Integrity, Innovation, and Inclusivity drive everything we do at WebRTC."))))),r.a.createElement(k,null));a(136);var W=e=>r.a.createElement("div",null,r.a.createElement(C,e),r.a.createElement("section",{className:"connect-section"},r.a.createElement("h1",null,"Connect with Us"),r.a.createElement("p",null,"Learn how to connect with our services and start using WebRTC technology.")),r.a.createElement(k,null));a(137);var A=e=>{const[t,a]=Object(n.useState)(null),l=[{title:"1. Introduction to WebRTC",content:"WebRTC (Web Real-Time Communication) enables peer-to-peer audio, video, and data sharing in modern browsers without the need for plugins."},{title:"2. Project Setup",content:r.a.createElement("ol",null,r.a.createElement("li",null,"Install Node.js and npm."),r.a.createElement("li",null,"Install dependencies with ",r.a.createElement("code",null,"npm install"),"."),r.a.createElement("li",null,"Run the server using ",r.a.createElement("code",null,"node server.js"),"."))},{title:"3. Starting a Video Call",content:"Create a unique room ID and share it to initiate a real-time video call."},{title:"4. Troubleshooting",content:"Ensure camera and microphone permissions are enabled. Clear browser cache if the issue persists."}];return r.a.createElement("div",null,r.a.createElement(C,e),r.a.createElement("section",{id:"start",className:"documentation"},r.a.createElement("div",{className:"doc-container"},r.a.createElement("h2",null,"Documentation Overview"),r.a.createElement("div",{className:"accordion"},l.map((e,n)=>r.a.createElement("div",{key:n,className:"accordion-item"},r.a.createElement("button",{className:"accordion-btn "+(t===n?"active":""),onClick:()=>(e=>{a(t===e?null:e)})(n)},e.title),r.a.createElement("div",{className:"accordion-content",style:{maxHeight:t===n?"100px":"0"}},r.a.createElement("p",null,e.content))))))),r.a.createElement(k,null))};a(138);var P=e=>r.a.createElement("div",null,r.a.createElement(C,e),r.a.createElement("section",{className:"demo-section"},r.a.createElement("h1",null,"Demo"),r.a.createElement("p",null,"Watch our demo to see WebRTC in action!")),r.a.createElement(k,null));a(139);var q=a(74),U=a(71);const L=e=>{let{room:t,onRoomSelect:a}=e;const[n,l]=Object(U.a)(t.roomId,{successDuration:1e3});return r.a.createElement("li",{key:t._id,onClick:()=>{a(t.roomId)},style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"15px",border:"1px solid #ccc",borderRadius:"5px",marginBottom:"10px",cursor:"pointer",backgroundColor:"#f9f9f9"}},r.a.createElement("strong",null,t.roomName),r.a.createElement("button",{style:{width:"80px",padding:"10px",backgroundColor:"blue",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"},onClick:e=>{e.stopPropagation(),l()}},r.a.createElement(q.a,null),n&&" Copied"))};var z=e=>{const[t,a]=Object(n.useState)([]),[l,o]=Object(n.useState)(""),[c,i]=Object(n.useState)(""),[s,m]=Object(n.useState)(!1),u=t=>{e.history.push("/room/"+t)},d=async()=>{m(!0);try{const e=await(async()=>{try{const e=await j.get("rooms");if(200==e.status&&e.data)return e.data}catch(e){console.error("Error creating room:",e)}})();m(!1),e&&e.length?a(e):a([])}catch(e){console.error("Error fetching rooms:",e)}finally{m(!1)}};Object(n.useEffect)(()=>{d()},[]);const p=async()=>{let t=await(async e=>{try{const t=await j.get("rooms/"+e);return!(200!=t.status||!t.data)&&t.data}catch(t){return console.error("Error creating room:",t),!1}})(c);t&&t.room&&t.room.roomId==c?e.history.push("/room/"+t.room.roomId):R.a.fail("Invalid Room Id",3e3,()=>{})};return r.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-evenly"}},r.a.createElement("div",null),r.a.createElement("div",null,r.a.createElement("div",{style:{padding:"20px",maxWidth:"400px",margin:"auto"}},r.a.createElement("h2",{style:{textAlign:"center",marginBottom:"20px"}},"Room List"),r.a.createElement("div",{style:{marginBottom:"20px"}},r.a.createElement("input",{type:"text",placeholder:"Enter room name",value:l,onChange:e=>o(e.target.value),style:{width:"100%",padding:"10px",marginBottom:"10px",border:"1px solid #ccc",borderRadius:"5px"}}),r.a.createElement("button",{onClick:async()=>{if(l.trim())try{const e=await(async e=>{try{const t=await j.post("rooms/create",{roomName:e});if(200==t.status&&t.data)return t.data;console.log("Room created successfully:",t.data)}catch(t){console.error("Error creating room:",t)}})(l);(null===e||void 0===e?void 0:e.room)&&a(t=>[...t,e.room]),o("")}catch(e){console.error("Error creating room:",e)}},style:{width:"100%",padding:"10px",backgroundColor:"blue",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"}},"Create New Room")),s?r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("span",null,"Loading...")):r.a.createElement("ul",{style:{listStyle:"none",padding:"0"}},t.map(e=>r.a.createElement(L,{onRoomSelect:u,room:e}))))),r.a.createElement("div",null,r.a.createElement("input",{style:{borderRadius:"5px",height:"36px",marginRight:"3px",paddingLeft:"5px"},value:c,onChange:e=>i(e.target.value),type:"text",placeholder:"Enter Room Id"}),r.a.createElement("button",{style:{width:"100px",padding:"10px",backgroundColor:"blue",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"},onClick:e=>{e.stopPropagation(),p()}},"Join Room")))};var V=e=>r.a.createElement("div",null,r.a.createElement(C,e),r.a.createElement(z,e),r.a.createElement(k,null));var B=e=>{let{component:t,...a}=e;const[l,o]=Object(n.useState)(null);return Object(n.useEffect)(()=>{(async()=>{const e=await(async()=>{const e=localStorage.getItem("authTicket");if(!e)return!1;try{return(await j.get("/auth/validate-ticket",{headers:{Authorization:e}})).data}catch(a){var t;return console.error("Ticket validation failed:",(null===(t=a.response)||void 0===t?void 0:t.data)||a.message),!1}})();o(e)})()},[]),null===l?r.a.createElement("p",null,"Loading..."):r.a.createElement(i.b,Object.assign({},a,{render:e=>l?r.a.createElement(t,e):r.a.createElement(i.a,{to:"/login"})}))},M=a(73),H=a.n(M);const $=p.a.div`
`,J=p.a.div`
  height: 100vh;
  width: 100%;
`,Q=p.a.div`
  position: fixed;
  bottom: 0;
  width: 100%;
  background-color: rgba(0, 0, 0, 0.4);
  filter: brightness(1);
  z-index: 1;
  border-radius: 6px;
  gap: 24px;
  display: flex;
  height: 68px;
  align-items: center;
  justify-content: center;
}
`,G=(p.a.div`
  margin: 3px;
  padding: 5px;
  height: 16px;
  width: 98%;
  margin-top: -6vh;
  filter: brightness(1);
  z-index: 1;
  border-radius: 6px;
  display: flex;
  justify-content: center;
`,p.a.img`
  cursor: pointer;
  height: 40px;
  width: 40px;
`),Y=(p.a.img`
  height: 15px;
  text-align: left;
  opacity: 0.5;
`,p.a.div`
    z-index: 2;
    bottom: 0;
    height: 130px;
    position: fixed;
    width: 200px;
`),_=p.a.video`
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 10px;
  border: 3px solid gray;
  background-color: black;
`,K=p.a.div`
  display: grid;
  width: 100vw;
  height: 80vh;
  gap: 10px;
  padding: 10px;
  grid-template-columns: ${e=>{let{count:t}=e;return`repeat(${t>2?2:t}, 1fr)`}};
  grid-template-rows: ${e=>{let{count:t}=e;return`repeat(${Math.ceil(t/2)}, 1fr)`}};
`,X=e=>{const t=Object(n.useRef)();return Object(n.useEffect)(()=>{e.peer.on("stream",e=>{t.current.srcObject=e})},[]),r.a.createElement(_,Object.assign({playsInline:!0,autoPlay:!0,ref:t},e))};var Z=e=>{let t=!0,a=[];const[l,o]=Object(n.useState)(!0),[c,i]=Object(n.useState)(null),[s,u]=Object(n.useState)([]),[p,h]=Object(n.useState)([]),[b,f]=Object(n.useState)([]),[w,k]=Object(n.useState)(!0),[N,O]=Object(n.useState)(!0),[R,D]=Object(n.useState)([]),T=Object(n.useRef)(),F=Object(n.useRef)(),W=Object(n.useRef)(),A=Object(n.useRef)([]),P=e.match.params.roomID,q={minAspectRatio:1.333,minFrameRate:60,height:window.innerHeight/1.8,width:window.innerWidth/2};const U=async()=>{const e=await(async e=>{try{const t=await j.get("room/"+e);if(200==t.status&&t.data)return t.data}catch(t){console.error("Error creating room:",t)}})(P);console.log(e),e&&e.users&&f(e.users)},L=async()=>{const e=await S();if(e&&e.users){let t=JSON.parse(JSON.stringify(e.users));t.forEach(async e=>{let t=await(async e=>{try{var t;const a=await I.a.get(`https://api.openweathermap.org/data/2.5/weather?q=${(null===e||void 0===e?void 0:e.city)||"Islamabad"}&units=metric&appid=37e78c3096e576c4b3758d158358e03b`);return!!(null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.main)&&{temp:a.data.main.temp,humidity:a.data.main.humidity}}catch(a){return!1}})(e);t&&(e.temp=t.temp,e.humidity=t.humidity)}),u(t)}};Object(n.useEffect)(()=>{U()},[p]),Object(n.useEffect)(()=>{T.current=m.a.connect("/");const e=localStorage.getItem("authTicket");if(e)try{const t=Object(g.a)(e);i(t),V(t)}catch(t){console.error("Invalid token:",t),i(null)}return L(),()=>{W.current.getTracks().forEach((function(e){e.stop()})),T.current.disconnect()}},[]);const z=async e=>{try{return await navigator.mediaDevices.getUserMedia({video:!1,audio:!0})}catch(t){const a=(e=>{const t=document.getElementById("canvas"),a=t.getContext("2d");function n(){a.fillStyle="black",a.fillRect(0,0,t.width,t.height),a.font="40px Arial",a.fillStyle="red",a.textAlign="center",a.textBaseline="middle",a.fillText(e.username,t.width/2,t.height/2)}n(),setInterval(n,100);return t.captureStream(30)})(e),n=await navigator.mediaDevices.getUserMedia({audio:!0});return new MediaStream([...a.getVideoTracks(),...n.getAudioTracks()])}},V=async e=>{const a=await async function(){return(await navigator.mediaDevices.enumerateDevices()).filter(e=>"videoinput"===e.kind)}();console.log(a);const n=await(async e=>{try{return await navigator.mediaDevices.getUserMedia({video:q,audio:!0})}catch(a){t=!1;return z(e)}})(e);W.current=n,F.current.srcObject=n,o(t),T.current.emit("join room",{roomID:P,username:e.username,isVideo:t}),T.current.on("all users",e=>{const t=[];e.forEach(e=>{let a=e.socketId;const r=function(e,t,a){const n=new d.a({initiator:!0,trickle:!1,stream:a});return n.on("signal",a=>{T.current.emit("sending signal",{userToSignal:e,callerID:t,signal:a,roomID:P})}),n}(a,T.current.id,n);A.current.push({peerID:a,peer:r}),-1==t.findIndex(e=>e.peerID==a)&&t.push({peerID:a,peer:r})}),h(t)}),T.current.on("user joined",e=>{const t=function(e,t,a){const n=new d.a({initiator:!1,trickle:!1,stream:a});return n.on("signal",e=>{T.current.emit("returning signal",{signal:e,callerID:t,roomID:P})}),n.signal(e),n}(e.signal,e.callerID,n);A.current.push({peerID:e.callerID,peer:t});const a={peer:t,peerID:e.callerID};-1==p.findIndex(t=>t.peerID==e.callerID)&&h(e=>[...e,a])}),T.current.on("user left",e=>{console.log("========== user left ===========");const t=A.current.find(t=>t.peerID===e);t&&t.peer.destroy();const a=A.current.filter(t=>t.peerID!==e);A.current=a,h(a)}),T.current.on("receiving returned signal",e=>{A.current.find(t=>t.peerID===e.id).peer.signal(e.signal)}),T.current.on("change",e=>{console.log(e),D(e)})};return r.a.createElement(J,null,r.a.createElement(C,e),r.a.createElement($,null,r.a.createElement(Y,null,r.a.createElement(_,{style:{display:l?"block":"none"},muted:!0,ref:F,autoPlay:!0,playsInline:!0}),r.a.createElement("div",{style:{alignItems:"center",justifyContent:"center",height:"100%",width:"100%",backgroundColor:"black",color:"white",fontSize:"20px",fontWeight:"bold",display:l?"none":"flex"}},"Audio Only")),p.length>0?(e=>{const t=Array.from(new Map(e.map(e=>[e.peerID,e])).values());return r.a.createElement(K,{count:t.length},e.map((e,t)=>{0==t&&(a=[]);let n=!0,l=!0;if(R&&R.forEach(t=>{e&&e.peerID&&e.peerID===t.id&&(n=t.audioFlag,l=t.videoFlag)}),a.findIndex(t=>t==e.peerID)>-1)return null;const o=b.findIndex(t=>t.socketId==e.peerID);console.log("================ user ==============="),console.log(b[o]);let c=-1;return o>-1&&(c=s.findIndex(e=>e.username==b[o].username)),a.push(e.peerID),r.a.createElement("div",{style:{width:"100%",height:"100%",position:"relative",borderRadius:"10px",overflow:"hidden"},id:e.peerID,key:e.peerID},r.a.createElement("div",{className:"video-top-bar",style:{position:"absolute",top:"0",background:"rgba(255,255,255,0.6)"}},r.a.createElement("span",null,c>-1?s[c].username:"Unknown"),r.a.createElement("span",null,"\ud83d\udccc",c>-1?s[c].city:""," "),r.a.createElement("span",null," \ud83c\udf21\ufe0f ",c>-1?s[c].temp:"","\xb0C "),r.a.createElement("span",null," \ud83d\udca7 ",c>-1?s[c].humidity:"","\xb0C "),r.a.createElement("span",null)),r.a.createElement(X,{style:{display:b[o]&&b[o].isVideo?"block":"none"},peer:e.peer}),r.a.createElement("div",{style:{alignItems:"center",justifyContent:"center",height:"100%",width:"100%",backgroundColor:"black",color:"white",fontSize:"20px",fontWeight:"bold",display:b[o]&&b[o].isVideo?"none":"flex"}},"Audio Only"))}))})(p):r.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"}},r.a.createElement("p",null,"Waiting for participants...")),r.a.createElement(Q,null,r.a.createElement(G,{src:N?y.a:x.a,onClick:()=>{F.current.srcObject&&F.current.srcObject.getTracks().forEach((function(e){"video"===e.kind&&(e.enabled?(T.current.emit("change",[...R,{id:T.current.id,videoFlag:!1,audioFlag:w}]),e.enabled=!1,O(!1)):(T.current.emit("change",[...R,{id:T.current.id,videoFlag:!0,audioFlag:w}]),e.enabled=!0,O(!0)))}))}}),r.a.createElement(G,{src:w?v.a:E.a,onClick:()=>{F.current.srcObject&&F.current.srcObject.getTracks().forEach((function(e){"audio"===e.kind&&(e.enabled?(T.current.emit("change",[...R,{id:T.current.id,videoFlag:N,audioFlag:!1}]),e.enabled=!1,k(!1)):(T.current.emit("change",[...R,{id:T.current.id,videoFlag:N,audioFlag:!0}]),e.enabled=!0,k(!0)))}))}}),r.a.createElement(G,{src:H.a,onClick:()=>{(()=>{W.current.getTracks().forEach((function(e){e.stop()})),T.current.disconnect();const t=b.findIndex(e=>e.username==c.username);t>-1&&(console.log(b[t]),b[t].peer&&b[t].peer.destroy()),e.history.push("/rooms")})()}}))),r.a.createElement("canvas",{id:"canvas",width:"640",height:"480",style:{display:"none"}}))};var ee=function(){return r.a.createElement(c.a,null,r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/login",component:D}),r.a.createElement(i.b,{path:"/register",component:T}),r.a.createElement(i.b,{path:"/aboutus",component:F}),r.a.createElement(i.b,{path:"/connect",component:W}),r.a.createElement(i.b,{path:"/doc",component:A}),r.a.createElement(i.b,{path:"/demo",component:P}),r.a.createElement(B,{path:"/room/:roomID",component:Z}),r.a.createElement(B,{path:"/rooms",component:V}),r.a.createElement(i.b,{path:"/",component:O})))};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ee,null)),document.getElementById("root"))},31:function(e,t,a){e.exports=a.p+"static/media/micmute.22ed48be.svg"},32:function(e,t,a){e.exports=a.p+"static/media/micunmute.aff35866.svg"},33:function(e,t,a){e.exports=a.p+"static/media/webcam.9f0afb70.svg"},34:function(e,t,a){e.exports=a.p+"static/media/webcamoff.fe3df939.svg"},73:function(e,t,a){e.exports=a.p+"static/media/end-call-icon.bb70e485.svg"},75:function(e,t,a){e.exports=a(141)}},[[75,1,2]]]);
//# sourceMappingURL=main.eed8ea96.chunk.js.map