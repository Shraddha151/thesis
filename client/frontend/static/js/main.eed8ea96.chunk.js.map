{"version":3,"sources":["components/Header.js","components/Footer.js","apis/axiosConfig.js","apis/authApis.js","routes/Room.js","components/WebRTC.js","components/Login.js","components/Reg.js","components/AboutUs.js","components/Connect.js","components/Doc.js","components/Demo.js","components/RoomList.jsx","apis/roomApi.js","components/Rooms.jsx","utils/ProtectedRoute.js","routes/RoomCopy.js","App.js","index.js","assets/micmute.svg","assets/micunmute.svg","assets/webcam.svg","assets/webcamoff.svg","assets/end-call-icon.svg"],"names":["Header","props","menuOpen","setMenuOpen","useState","user","setUser","temperature","setTemperature","humid","setHumid","useEffect","token","localStorage","getItem","decodedUser","jwtDecode","error","console","async","_response$data","response","axios","get","city","data","main","temp","toFixed","humidity","fetchWeather","React","createElement","className","getHeaderWeather","rDiv","Fragment","Link","to","onClick","toggleMenu","style","display","textAlign","username","minWidth","handleLogout","removeItem","history","push","window","location","href","Footer","API","create","baseURL","interceptors","request","use","config","headers","Authorization","Promise","reject","fetchUsers","status","styled","div","img","video","WebRTC","src","alt","id","Login","formData","setFormData","email","password","errors","setErrors","handleChange","e","target","name","value","onSubmit","preventDefault","validationErrors","validateForm","newErrors","trim","test","length","Object","keys","post","ticket","setItem","log","_error$response","message","loginUser","Toast","fail","htmlFor","onChange","type","placeholder","required","Reg","createUser","success","confirmPassword","AboutUs","Connect","Doc","activeIndex","setActiveIndex","sections","title","content","map","section","index","key","toggleAccordion","maxHeight","Demo","Li","_ref","room","onRoomSelect","isCopied","setCopied","useClipboard","roomId","successDuration","_id","justifyContent","alignItems","padding","border","borderRadius","marginBottom","cursor","backgroundColor","roomName","width","color","stopPropagation","BiClipboard","RoomList","rooms","setRooms","newRoomName","setNewRoomName","joinRoomId","setJoinRoomId","loading","setLoading","fetchRooms","getRooms","handleJoinRoom","details","getRoomDetails","maxWidth","margin","createRoom","prevRooms","listStyle","height","marginRight","paddingLeft","Rooms","ProtectedRoute","component","Component","rest","isAuthenticated","setIsAuthenticated","isValid","_error$response2","validateTicket","checkAuth","Route","assign","render","Redirect","Container","MainContainer","Controls","ImgComponent","MyVideoContainer","StyledVideo","VideoGrid","count","_ref2","Math","ceil","Video","ref","useRef","peer","on","stream","current","srcObject","playsInline","autoPlay","RoomCopy","isVideo","userVideosArray","hasVideo","setHasVideo","users","setUsers","peers","setPeers","usersInRoom","setUsersInRoom","audioFlag","setAudioFlag","videoFlag","setVideoFlag","userUpdate","setUserUpdate","socketRef","userVideo","streamRef","peersRef","roomID","match","params","videoConstraints","minAspectRatio","minFrameRate","innerHeight","innerWidth","fetchRoomUsers","res","fetchAllUsersInRoom","fetchAllUser","resUsers","JSON","parse","stringify","forEach","weather","io","connect","createStream","getTracks","track","stop","disconnect","getAudioStream","navigator","mediaDevices","getUserMedia","audio","err","canvasStream","dUser","canvas","document","getElementById","ctx","getContext","drawText","fillStyle","fillRect","font","textBaseline","fillText","setInterval","captureStream","getCanvasStream","audioStream","MediaStream","getVideoTracks","getAudioTracks","cameraList","enumerateDevices","filter","device","kind","getCameras","getStream","emit","socketUser","userID","socketId","userToSignal","callerID","Peer","initiator","trickle","signal","createPeer","peerID","findIndex","x","payload","incomingSignal","addPeer","peerObj","find","p","destroy","muted","fontSize","fontWeight","newPeers","uniquePeers","Array","from","Map","values","audioFlagTemp","videoFlagTemp","entry","userIndex","userDetailIndex","position","overflow","top","background","getVideoGrid","webcam","webcamoff","enabled","micunmute","micmute","endcall","endCallClick","App","BrowserRouter","Switch","path","ReactDOM","StrictMode","module","exports"],"mappings":"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","file":"static/js/main.eed8ea96.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { jwtDecode } from \"jwt-decode\";\r\nimport \"../styles/header.css\"\r\nimport axios from \"axios\";\r\n\r\nconst Header = (props) => {\r\n  const [menuOpen, setMenuOpen] = useState(false);\r\n  const [user, setUser] = useState(null);\r\n  const [temperature, setTemperature] = useState(null);\r\n  const [humid, setHumid] = useState(null);\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem(\"authTicket\"); // Remove token on logout\r\n    setUser(null);\r\n    if(props?.history) {\r\n      props.history.push(\"/login\");\r\n    } else {\r\n      window.location.href = \"/login\"\r\n    }\r\n  };\r\n  const fetchWeather = async () => {\r\n    try {\r\n      const response = await axios.get(\r\n        `https://api.openweathermap.org/data/2.5/weather?q=${user?.city || \"Islamabad\"}&units=metric&appid=37e78c3096e576c4b3758d158358e03b`\r\n      );\r\n      if (response?.data?.main) {\r\n        setTemperature(response.data.main.temp.toFixed(1)); // Round temperature to 1 decimal place\r\n        setHumid(response.data.main.humidity.toFixed(1)); // Round temperature to 1 decimal place\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error fetching weather:\", error);\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    // Get token from localStorage\r\n    const token = localStorage.getItem(\"authTicket\");\r\n\r\n    if (token) {\r\n      try {\r\n        // Decode the JWT token\r\n        const decodedUser = jwtDecode(token);\r\n        setUser(decodedUser);\r\n      } catch (error) {\r\n        console.error(\"Invalid token:\", error);\r\n        setUser(null);\r\n      }\r\n    }\r\n  }, []);\r\n  useEffect(() => {\r\n    fetchWeather();\r\n  }, [user])\r\n  const toggleMenu = () => {\r\n    setMenuOpen(!menuOpen);\r\n  };\r\n\r\n  const getHeaderWeather = () => {\r\n    let rDiv = <></>;\r\n    if(user) {\r\n      rDiv = <span>\r\n              <span>{user?.city} </span>\r\n              {temperature !== null && <span> 🌡️ {temperature}°C </span>}\r\n              {humid !== null && <span> 💧 {humid}°C</span>}\r\n            </span>\r\n    }\r\n    return rDiv;\r\n  }\r\n\r\n  return (\r\n    <header>\r\n      {/* Top Bar */}\r\n      <div className=\"top-bar\">\r\n        <div className=\"top-left\">\r\n          {getHeaderWeather()}\r\n        </div>\r\n        { !user && <div className=\"top-right\">\r\n          <Link to=\"#\">🌐 English</Link>\r\n          <Link to=\"/login\">👤 Log in</Link>\r\n        </div> }\r\n      </div>\r\n\r\n      {/* Navigation Bar */}\r\n      <nav className=\"nav-bar\">\r\n        <Link to=\"/\" className=\"logo\">WebRTC</Link>\r\n        <div className=\"menu-toggle\" onClick={toggleMenu}>\r\n          <span></span>\r\n          <span></span>\r\n          <span></span>\r\n        </div>\r\n        <div className={`nav-links ${menuOpen ? 'open' : ''}`}>\r\n          <Link to=\"/\">Home</Link>\r\n          {/* <Link to=\"/connect\">Connect</Link> */}\r\n          { user && <Link to=\"/rooms\">Rooms</Link>}\r\n          <Link to=\"/doc\">Documentation</Link>\r\n          <Link to=\"/aboutus\">About Us</Link>\r\n        </div>\r\n        <div className=\"cta\">\r\n          { user ? <>\r\n            <span style={{ display: \"block\", textAlign: \"center\"}}>👤 {user.username}</span>\r\n              <button style={{minWidth: \"140px\" }} className=\"btn btn-logout\" onClick={handleLogout}>Logout</button>\r\n          </> : \r\n          <Link to=\"/register\" className=\"btn\">Registration</Link>\r\n          }\r\n        </div>\r\n      </nav>\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst Footer = () => {\r\n    return ( <footer className=\"footer\">\r\n        <div className=\"footer-container\">\r\n          <div className=\"footer-column\">\r\n            <h3>WebRTC</h3>\r\n            <p>Empowering real-time communication with seamless video, audio, and data sharing.</p>\r\n          </div>\r\n          <div className=\"footer-column\">\r\n            <h4>Quick Links</h4>\r\n            <ul>\r\n              <li><Link\r\n               to=\"/\">Home</Link></li>\r\n              <li><Link\r\n               to=\"/connect\">Connect</Link></li>\r\n              <li><Link\r\n               to=\"/doc\">Documentation</Link></li>\r\n              <li><Link\r\n               to=\"/aboutus\">About Us</Link></li>\r\n            </ul>\r\n          </div>\r\n          <div className=\"footer-column\">\r\n            <h4>Contact Us</h4>\r\n            <p>📞 <a href=\"tel:+18556722788\">1-855-672-2788</a></p>\r\n            <p>📧 <a href=\"mailto:support@webrtc.com\">support@webrtc.com</a></p>\r\n          </div>\r\n        </div>\r\n        <div className=\"footer-bottom\">\r\n          <p>&copy; 2024 WebRTC. All Rights Reserved.</p>\r\n        </div>\r\n      </footer>)}\r\n\r\n      export default Footer;","import axios from \"axios\";\r\n\r\nconst API = axios.create({\r\n  baseURL: \"/api/\", // Your server's base URL\r\n});\r\n\r\n// Attach the token to every request automatically\r\nAPI.interceptors.request.use(\r\n  (config) => {\r\n    const token = localStorage.getItem(\"authTicket\"); // Fetch the token from localStorage\r\n    if (token) {\r\n      config.headers.Authorization = token; // Attach the token to Authorization header\r\n    }\r\n    return config;\r\n  },\r\n  (error) => {\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport default API;\r\n","import API from \"./axiosConfig\";\r\n\r\nexport const createUser = async (username, email, password, city) => {\r\n  try {\r\n    const response = await API.post(\r\n      \"auth/register\",\r\n      { username, email, password, city },\r\n    );\r\n    console.log(\"Room created successfully:\", response);\r\n    return response\r\n  } catch (error) {\r\n    console.error(\"Error creating room:\", error);\r\n  }\r\n  return false;\r\n};\r\n\r\nexport const fetchUsers = async () => {\r\n  try {\r\n    const response = await API.get(\"auth/users\");\r\n    \r\n    if(response.status == 200) {\r\n      return response.data\r\n    }\r\n    return false\r\n  } catch (error) {\r\n    console.error(\"Error creating room:\", error);\r\n  }\r\n  return false;\r\n};\r\n\r\nexport const loginUser = async (email, password) => {\r\n  try {\r\n    const response = await API.post(\"/auth/login\", { email, password });\r\n    if (response.data.ticket) {\r\n      localStorage.setItem(\"authTicket\", response.data.ticket);\r\n      console.log(\"Login successful\");\r\n      return response.data;\r\n    }\r\n  } catch (error) {\r\n    console.error(\"Login failed:\", error.response?.data || error.message);\r\n    return null;\r\n  }\r\n};\r\n\r\nexport const logoutUser = () => {\r\n  localStorage.removeItem(\"authTicket\");\r\n  console.log(\"User logged out\");\r\n};\r\n\r\nexport const validateTicket = async () => {\r\n  const ticket = localStorage.getItem(\"authTicket\");\r\n  if (!ticket) return false;\r\n\r\n  try {\r\n    const response = await API.get(\"/auth/validate-ticket\", {\r\n      headers: { Authorization: ticket },\r\n    });\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error(\"Ticket validation failed:\", error.response?.data || error.message);\r\n    return false;\r\n  }\r\n};","import React, { useEffect, useRef, useState } from \"react\";\r\nimport io from \"socket.io-client\";\r\nimport Peer from \"simple-peer\";\r\nimport styled from \"styled-components\";\r\nimport { jwtDecode } from \"jwt-decode\";\r\nimport micmute from \"../assets/micmute.svg\";\r\nimport micunmute from \"../assets/micunmute.svg\";\r\nimport webcam from \"../assets/webcam.svg\";\r\nimport webcamoff from \"../assets/webcamoff.svg\";\r\nimport Header from \"../components/Header\";\r\nimport Footer from \"../components/Footer\";\r\nimport { fetchUsers } from \"../apis/authApis\";\r\n\r\nconst Container = styled.div`\r\n  height: 100vh;\r\n  width: 20%;\r\n`;\r\n\r\nconst MainContainer = styled.div`\r\n  height: 100vh;\r\n  width: 100%;\r\n`;\r\n\r\nconst Controls = styled.div`\r\n  margin: 3px;\r\n  padding: 5px;\r\n  height: 27px;\r\n  width: 98%;\r\n  background-color: rgba(255, 226, 104, 0.1);\r\n  margin-top: -8.5vh;\r\n  filter: brightness(1);\r\n  z-index: 1;\r\n  border-radius: 6px;\r\n`;\r\n\r\nconst ControlSmall = styled.div`\r\n  margin: 3px;\r\n  padding: 5px;\r\n  height: 16px;\r\n  width: 98%;\r\n  margin-top: -6vh;\r\n  filter: brightness(1);\r\n  z-index: 1;\r\n  border-radius: 6px;\r\n  display: flex;\r\n  justify-content: center;\r\n`;\r\n\r\nconst ImgComponent = styled.img`\r\n  cursor: pointer;\r\n  height: 25px;\r\n`;\r\n\r\nconst ImgComponentSmall = styled.img`\r\n  height: 15px;\r\n  text-align: left;\r\n  opacity: 0.5;\r\n`;\r\n\r\nconst StyledVideo = styled.video`\r\n  width: 100%;\r\n  position: static;\r\n  border-radius: 10px;\r\n  overflow: hidden;\r\n  margin: 1px;\r\n  border: 5px solid gray;\r\n`;\r\n\r\nconst Video = (props) => {\r\n  const ref = useRef();\r\n\r\n  useEffect(() => {\r\n    console.log(\"==== calling peer =======\")\r\n    props.peer.on(\"stream\", (stream) => {\r\n      ref.current.srcObject = stream;\r\n    });\r\n  }, []);\r\n\r\n  return <StyledVideo playsInline autoPlay ref={ref} />;\r\n};\r\n\r\nconst Room = (props) => {\r\n  let userVideosArray = [];\r\n  const [user, setUser] = useState(null);\r\n  const [users, setUsers] = useState([]);\r\n  const [peers, setPeers] = useState([]);\r\n  const [audioFlag, setAudioFlag] = useState(true);\r\n  const [videoFlag, setVideoFlag] = useState(true);\r\n  const [userUpdate, setUserUpdate] = useState([]);\r\n  const socketRef = useRef();\r\n  const userVideo = useRef();\r\n  const streamRef = useRef();\r\n  const peersRef = useRef([]);\r\n  const roomID = props.match.params.roomID;\r\n  const videoConstraints = {\r\n    minAspectRatio: 1.333,\r\n    minFrameRate: 60,\r\n    height: window.innerHeight / 1.8,\r\n    width: window.innerWidth / 2,\r\n  };\r\n\r\n  const fetchAllUser = async () => {\r\n    const res = await fetchUsers();\r\n    console.log(res)\r\n    if(res && res.users) {\r\n      setUsers(res.users);\r\n    }\r\n  }\r\n  useEffect(() => {\r\n    socketRef.current = io.connect(\"/\");\r\n    const token = localStorage.getItem(\"authTicket\");\r\n\r\n    if (token) {\r\n      try {\r\n        const decodedUser = jwtDecode(token);\r\n        console.log(decodedUser)\r\n        setUser(decodedUser);\r\n        createStream(decodedUser);\r\n      } catch (error) {\r\n        console.error(\"Invalid token:\", error);\r\n        setUser(null);\r\n      }\r\n    }\r\n    fetchAllUser();\r\n    return () => {\r\n      streamRef.current.getTracks().forEach(function (track) {\r\n        track.stop();\r\n      });\r\n      socketRef.current.disconnect()\r\n    }\r\n  }, []);\r\n\r\n  async function getCameras() {\r\n    const devices = await navigator.mediaDevices.enumerateDevices();\r\n    return devices.filter(device => device.kind === \"videoinput\");\r\n}\r\n\r\n  async function createStream(dUser) {\r\n    const cameraList = await getCameras()\r\n    console.log(cameraList);\r\n    navigator.mediaDevices\r\n      .getUserMedia({ video: videoConstraints, audio: true })\r\n      .then((stream) => {\r\n        streamRef.current = stream\r\n        userVideo.current.srcObject = stream;\r\n        socketRef.current.emit(\"join room\", { roomID, username: dUser.username });\r\n        socketRef.current.on(\"all users\", (users) => {\r\n          console.log(users)\r\n          const peers = [];\r\n          users.forEach((socketUser) => {\r\n            let userID = socketUser.socketId;\r\n            let username = socketUser.username\r\n            const peer = createPeer(userID, socketRef.current.id, stream, username);\r\n            peersRef.current.push({\r\n              peerID: userID,\r\n              peer,\r\n              username\r\n            });\r\n            let index = peers.findIndex((x) => x.peerID == userID);\r\n            if (index == -1) {\r\n              peers.push({\r\n                peerID: userID,\r\n                peer,\r\n                username\r\n              });\r\n            }\r\n          });\r\n          setPeers(peers);\r\n        });\r\n        socketRef.current.on(\"user joined\", (payload) => {\r\n          console.log(\"==\", payload)\r\n          const peer = addPeer(payload.signal, payload.callerID, stream, payload.username);\r\n          peersRef.current.push({\r\n            peerID: payload.callerID,\r\n            peer,\r\n            username: payload.username\r\n          });\r\n          const peerObj = {\r\n            peer,\r\n            peerID: payload.callerID,\r\n            username: payload.username\r\n          };\r\n          let index = peers.findIndex((x) => x.peerID == payload.callerID);\r\n          if (index == -1) {\r\n            setPeers((users) => [...users, peerObj]);\r\n          }\r\n        });\r\n\r\n        socketRef.current.on(\"user left\", (id) => {\r\n          const peerObj = peersRef.current.find((p) => p.peerID === id);\r\n          if (peerObj) {\r\n            peerObj.peer.destroy();\r\n          }\r\n          const peers = peersRef.current.filter((p) => p.peerID !== id);\r\n          peersRef.current = peers;\r\n          setPeers(peers);\r\n        });\r\n\r\n        socketRef.current.on(\"receiving returned signal\", (payload) => {\r\n          const item = peersRef.current.find((p) => p.peerID === payload.id);\r\n          item.peer.signal(payload.signal);\r\n        });\r\n\r\n        socketRef.current.on(\"change\", (payload) => {\r\n          setUserUpdate(payload);\r\n        });\r\n      });\r\n  }\r\n\r\n  function createPeer(userToSignal, callerID, stream, username) {\r\n    const peer = new Peer({\r\n      initiator: true,\r\n      trickle: false,\r\n      stream,\r\n    });\r\n\r\n    peer.on(\"signal\", (signal) => {\r\n      socketRef.current.emit(\"sending signal\", {\r\n        userToSignal,\r\n        callerID,\r\n        signal,\r\n        username\r\n      });\r\n    });\r\n\r\n    return peer;\r\n  }\r\n\r\n  function addPeer(incomingSignal, callerID, stream, username) {\r\n    const peer = new Peer({\r\n      initiator: false,\r\n      trickle: false,\r\n      stream,\r\n    });\r\n\r\n    peer.on(\"signal\", (signal) => {\r\n      socketRef.current.emit(\"returning signal\", { signal, callerID, username });\r\n    });\r\n\r\n    peer.signal(incomingSignal);\r\n\r\n    return peer;\r\n  }\r\n\r\n  return (\r\n    <MainContainer>\r\n      <Header {...props} />\r\n      <Container>\r\n        <div>\r\n          <StyledVideo muted ref={userVideo} autoPlay playsInline />\r\n          <Controls>\r\n            <ImgComponent\r\n              src={videoFlag ? webcam : webcamoff}\r\n              onClick={() => {\r\n                if (userVideo.current.srcObject) {\r\n                  userVideo.current.srcObject.getTracks().forEach(function (track) {\r\n                    if (track.kind === \"video\") {\r\n                      if (track.enabled) {\r\n                        socketRef.current.emit(\"change\", [...userUpdate, {\r\n                          id: socketRef.current.id,\r\n                          videoFlag: false,\r\n                          audioFlag,\r\n                        }]);\r\n                        track.enabled = false;\r\n                        setVideoFlag(false);\r\n                      } else {\r\n                        socketRef.current.emit(\"change\", [...userUpdate, {\r\n                          id: socketRef.current.id,\r\n                          videoFlag: true,\r\n                          audioFlag,\r\n                        }]);\r\n                        track.enabled = true;\r\n                        setVideoFlag(true);\r\n                      }\r\n                    }\r\n                  });\r\n                }\r\n              }}\r\n            />\r\n            &nbsp;&nbsp;&nbsp;\r\n            <ImgComponent\r\n              src={audioFlag ? micunmute : micmute}\r\n              onClick={() => {\r\n                if (userVideo.current.srcObject) {\r\n                  userVideo.current.srcObject.getTracks().forEach(function (track) {\r\n                    if (track.kind === \"audio\") {\r\n                      if (track.enabled) {\r\n                        socketRef.current.emit(\"change\", [...userUpdate, {\r\n                          id: socketRef.current.id,\r\n                          videoFlag,\r\n                          audioFlag: false,\r\n                        }]);\r\n                        track.enabled = false;\r\n                        setAudioFlag(false);\r\n                      } else {\r\n                        socketRef.current.emit(\"change\", [...userUpdate, {\r\n                          id: socketRef.current.id,\r\n                          videoFlag,\r\n                          audioFlag: true,\r\n                        }]);\r\n                        track.enabled = true;\r\n                        setAudioFlag(true);\r\n                      }\r\n                    }\r\n                  });\r\n                }\r\n              }}\r\n            />\r\n            <span>{user?.username}</span>\r\n          </Controls>\r\n        </div>\r\n        {peers.map((peer, index) => {\r\n          if(index == 0) {\r\n            userVideosArray = []\r\n          }\r\n          let audioFlagTemp = true;\r\n          let videoFlagTemp = true;\r\n          if (userUpdate) {\r\n            userUpdate.forEach((entry) => {\r\n              if (peer && peer.peerID && peer.peerID === entry.id) {\r\n                audioFlagTemp = entry.audioFlag;\r\n                videoFlagTemp = entry.videoFlag;\r\n              }\r\n            });\r\n          }\r\n          let videoIndex = userVideosArray.findIndex((x) => x == peer.peerID);\r\n          if(videoIndex > -1) {\r\n            return;\r\n          }\r\n          let userIndex = peers.findIndex((x) => user.username == peer.username);\r\n          if(userIndex > -1) {\r\n            \r\n            console.log(peers[userIndex])\r\n            console.log(userIndex)\r\n          }\r\n\r\n          userVideosArray.push(peer.peerID);\r\n          return (\r\n            <div id={peer.peerID} key={peer.peerID} style={{ position: \"relative\"}}>\r\n              <div style={{ position: \"absolute\", top: \"0\", background: \"rgba(0,0,0,0.6)\" }}>Test toolbar</div>\r\n              <Video peer={peer.peer} />\r\n              <ControlSmall>\r\n              </ControlSmall>\r\n            </div>\r\n          );\r\n        })}\r\n      </Container>\r\n      <Footer />\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nexport default Room;\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport '../styles/websitecss.css'\r\nimport Footer from './Footer';\r\nimport Header from './Header';\r\n\r\nconst WebRTC = (props) => {\r\n  const handleMenuToggle = () => {\r\n    const navLinks = document.getElementById('navLinks');\r\n    const menuToggle = document.getElementById('menuToggle');\r\n    navLinks.classList.toggle('active');\r\n    menuToggle.classList.toggle('open');\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Header {...props} />\r\n\r\n      {/* Hero Section */}\r\n      <section className=\"hero\">\r\n        <div className=\"hero-content\">\r\n          <h1>Real-Time Communication with WebRTC</h1>\r\n          <p>Empowering your applications with seamless video, audio, and data sharing. Experience the future of connectivity and collaboration.</p>\r\n          <Link to=\"/login\" className=\"cta-btn\">Get Started</Link>\r\n        </div>\r\n        <div className=\"hero-image\">\r\n          <img src=\"hero-image.png\" alt=\"WebRTC Connectivity\" />\r\n        </div>\r\n      </section>\r\n\r\n      {/* Main Section */}\r\n      <section id=\"features\" className=\"main-section\">\r\n        <h2>Why Choose WebRTC?</h2>\r\n        <p className=\"main-description\">Discover the powerful features of WebRTC that enable real-time and secure communication.</p>\r\n        <div className=\"features-container\">\r\n          <div className=\"feature-box\">\r\n            <img src=\"videocall.png\" alt=\"Video Call\" />\r\n            <h3>High-Quality Video Calls</h3>\r\n            <p>Experience ultra-clear, low-latency video and audio calls directly in your browser.</p>\r\n          </div>\r\n          <div className=\"feature-box\">\r\n            <img src=\"core.png\" alt=\"Data Transfer\" />\r\n            <h3>Secure Data Transfer</h3>\r\n            <p>Safely exchange data with end-to-end encryption and advanced security protocols.</p>\r\n          </div>\r\n          <div className=\"feature-box\">\r\n            <img src=\"scalability.png\" alt=\"Scalability\" />\r\n            <h3>Highly Scalable</h3>\r\n            <p>Built for scale, WebRTC can handle large user bases with efficient bandwidth usage.</p>\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n      {/* Footer */}\r\n      <Footer />\r\n      {/* <footer className=\"footer\">\r\n        <div className=\"footer-container\">\r\n          <div className=\"footer-column\">\r\n            <h3>WebRTC</h3>\r\n            <p>Empowering real-time communication with seamless video, audio, and data sharing.</p>\r\n          </div>\r\n          <div className=\"footer-column\">\r\n            <h4>Quick Links</h4>\r\n            <ul>\r\n              <li><a href=\"WebRTC.html\">Home</a></li>\r\n              <li><a href=\"connect.html\">Connect</a></li>\r\n              <li><a href=\"doc.html\">Documentation</a></li>\r\n              <li><a href=\"aboutus.html\">About Us</a></li>\r\n            </ul>\r\n          </div>\r\n          <div className=\"footer-column\">\r\n            <h4>Contact Us</h4>\r\n            <p>📞 <a href=\"tel:+18556722788\">1-855-672-2788</a></p>\r\n            <p>📧 <a href=\"mailto:support@webrtc.com\">support@webrtc.com</a></p>\r\n          </div>\r\n        </div>\r\n        <div className=\"footer-bottom\">\r\n          <p>&copy; 2024 WebRTC. All Rights Reserved.</p>\r\n        </div>\r\n      </footer> */}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default WebRTC;\r\n","import React, { useState } from 'react';\r\nimport '../styles/login.css';\r\nimport Footer from './Footer';\r\nimport Header from './Header';\r\nimport { loginUser } from '../apis/authApis';\r\nimport Toast from 'light-toast';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst Login = (props) => {\r\n  const [formData, setFormData] = useState({\r\n      email: \"\",\r\n      password: \"\",\r\n    });\r\n    const [errors, setErrors] = useState({});\r\n  \r\n    const handleChange = (e) => {\r\n      setFormData({ ...formData, [e.target.name]: e.target.value });\r\n      setErrors({ ...errors, [e.target.name]: \"\" }); // Clear error for the field\r\n    };\r\n    const validateForm = () => {\r\n      const newErrors = {};\r\n      if (!formData.email.trim()) {\r\n        newErrors.email = \"Email is required.\";\r\n      } else if (!/\\S+@\\S+\\.\\S+/.test(formData.email)) {\r\n        newErrors.email = \"Please enter a valid email address.\";\r\n      }\r\n      if (!formData.password.trim()) {\r\n        newErrors.password = \"Password is required.\";\r\n      } else if (formData.password.length < 6) {\r\n        newErrors.password = \"Password must be at least 6 characters long.\";\r\n      }\r\n      return newErrors;\r\n    };\r\n  const handleSubmit = async (e) => {\r\n\r\n    e.preventDefault();\r\n    const validationErrors = validateForm();\r\n    if (Object.keys(validationErrors).length > 0) {\r\n      setErrors(validationErrors);\r\n      return;\r\n    }\r\n    let response = await loginUser(formData.email, formData.password);\r\n    if(response?.ticket) {\r\n      props.history.push('/rooms');\r\n    } else {\r\n      Toast.fail(\"Please check your details\", 3000, () => {});\r\n    }\r\n  }\r\n  return (\r\n    <div>\r\n      <Header />\r\n\r\n      {/* Login Form */}\r\n      <section className=\"login-section\">\r\n        <div className=\"login-container\">\r\n          <form onSubmit={handleSubmit}>\r\n            <div className=\"input-group\">\r\n              <label htmlFor=\"email\">Email Address</label>\r\n              <input onChange={handleChange} type=\"email\" id=\"email\" name=\"email\" placeholder=\"Enter your email\" required />\r\n            </div>\r\n            <div className=\"input-group\">\r\n              <label htmlFor=\"password\">Password</label>\r\n              <input onChange={handleChange} type=\"password\" id=\"password\" name=\"password\" placeholder=\"Enter your password\" required />\r\n            </div>\r\n            <button type=\"submit\" className=\"btn-login\">Log In</button>\r\n          </form>\r\n          <p className=\"signup-text\">Don't have an account? <Link to=\"/register\">Sign up here</Link></p>\r\n        </div>\r\n      </section>\r\n\r\n      {/* Footer */}\r\n      <Footer />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","import React, { useState } from \"react\";\r\nimport { createUser } from \"../apis/authApis\";\r\nimport \"../styles/Reg.css\";\r\nimport Header from \"./Header\";\r\nimport Footer from \"./Footer\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Toast from 'light-toast';\r\n\r\nconst Reg = (props) => {\r\n  const [formData, setFormData] = useState({\r\n    username: \"\",\r\n    email: \"\",\r\n    password: \"\",\r\n    city: \"\"\r\n  });\r\n  const [errors, setErrors] = useState({});\r\n\r\n  const handleChange = (e) => {\r\n    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n    setErrors({ ...errors, [e.target.name]: \"\" }); // Clear error for the field\r\n  };\r\n\r\n  const validateForm = () => {\r\n    const newErrors = {};\r\n    if (!formData.username.trim()) newErrors.username = \"Username is required.\";\r\n    if (!formData.email.trim()) {\r\n      newErrors.email = \"Email is required.\";\r\n    } else if (!/\\S+@\\S+\\.\\S+/.test(formData.email)) {\r\n      newErrors.email = \"Please enter a valid email address.\";\r\n    }\r\n    if (!formData.city.trim()) {\r\n      newErrors.password = \"Password is required.\";\r\n    } else if (formData.city.length < 3) {\r\n      newErrors.password = \"City must be at least 3 characters long.\";\r\n    }\r\n    if (!formData.password.trim()) {\r\n      newErrors.password = \"Password is required.\";\r\n    } else if (formData.password.length < 6) {\r\n      newErrors.password = \"Password must be at least 6 characters long.\";\r\n    }\r\n    return newErrors;\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    console.log(\"======== submitting =========\")\r\n    e.preventDefault();\r\n    const validationErrors = validateForm();\r\n    if (Object.keys(validationErrors).length > 0) {\r\n      setErrors(validationErrors);\r\n      return;\r\n    }\r\n    console.log(\"Form submitted:\", formData);\r\n    const response = await createUser(formData.username, formData.email, formData.password, formData.city);\r\n    if(response?.status == 200) {\r\n      Toast.success(\"User registered Successfully\", 3000, () => {});\r\n      props.history.push(\"/login\")\r\n    } else {\r\n      Toast.success(\"User register failed\", 3000, () => {});\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n    <Header />\r\n    <section className=\"register-section\">\r\n      <div className=\"register-container\">\r\n        <h2>Create Your Account</h2>\r\n        <form onSubmit={handleSubmit}>\r\n          <div className=\"input-group\">\r\n            <label htmlFor=\"username\">User Name</label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"username\"\r\n              name=\"username\"\r\n              placeholder=\"Enter username\"\r\n              value={formData.username}\r\n              onChange={handleChange}\r\n              required\r\n            />\r\n          </div>\r\n          <div className=\"input-group\">\r\n            <label htmlFor=\"email\">Email Address</label>\r\n            <input\r\n              type=\"email\"\r\n              id=\"email\"\r\n              name=\"email\"\r\n              placeholder=\"Enter your email\"\r\n              value={formData.email}\r\n              onChange={handleChange}\r\n              required\r\n            />\r\n          </div>\r\n          <div className=\"input-group\">\r\n            <label htmlFor=\"email\">City Name</label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"city\"\r\n              name=\"city\"\r\n              placeholder=\"Enter your city\"\r\n              value={formData.city}\r\n              onChange={handleChange}\r\n              required\r\n            />\r\n          </div>\r\n          <div className=\"input-group\">\r\n            <label htmlFor=\"password\">Password</label>\r\n            <input\r\n              type=\"password\"\r\n              id=\"password\"\r\n              name=\"password\"\r\n              placeholder=\"Create a password\"\r\n              value={formData.password}\r\n              onChange={handleChange}\r\n              required\r\n            />\r\n          </div>\r\n          <div className=\"input-group\">\r\n            <label htmlFor=\"confirm-password\">Confirm Password</label>\r\n            <input\r\n              type=\"password\"\r\n              id=\"confirm-password\"\r\n              name=\"confirmPassword\"\r\n              placeholder=\"Confirm your password\"\r\n              value={formData.confirmPassword}\r\n              onChange={handleChange}\r\n              required\r\n            />\r\n          </div>\r\n          <button type=\"submit\" className=\"btn-register\">Register</button>\r\n        </form>\r\n        <p className=\"login-text\">\r\n          Already have an account? <Link to=\"/login\">Log in here</Link>\r\n        </p>\r\n      </div>\r\n    </section>\r\n    <Footer />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Reg;","import React from 'react';\r\nimport '../styles/aboutus.css';\r\nimport Footer from './Footer';\r\nimport Header from './Header';\r\n\r\nconst AboutUs = (props) => {\r\n  return (\r\n    <div>\r\n     <Header {...props} />\r\n\r\n      {/* About Us Section */}\r\n      <section id=\"about\" className=\"about-section\">\r\n      <div className=\"about-container\">\r\n        <h2>About Us</h2>\r\n        <p>\r\n          At <strong>WebRTC</strong>, we are committed to providing seamless real-time communication solutions for\r\n          video, audio, and data sharing. Our mission is to empower developers and businesses with cutting-edge\r\n          technology to build secure and scalable applications.\r\n        </p>\r\n\r\n        <div className=\"about-content\">\r\n          <div className=\"about-card\">\r\n            <h3>🚀 Our Mission</h3>\r\n            <p>To simplify real-time communication technology and make it accessible to everyone across the globe.</p>\r\n          </div>\r\n          <div className=\"about-card\">\r\n            <h3>💡 Our Vision</h3>\r\n            <p>Innovating and delivering secure, high-performance communication solutions for modern applications.</p>\r\n          </div>\r\n          <div className=\"about-card\">\r\n            <h3>🤝 Our Values</h3>\r\n            <p>Integrity, Innovation, and Inclusivity drive everything we do at WebRTC.</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n\r\n      {/* Footer */}\r\n      <Footer />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AboutUs;\r\n","import React, { useEffect, useContext } from 'react';\r\nimport '../styles/connect.css';\r\nimport Footer from './Footer';\r\nimport Header from './Header';\r\n\r\nconst Connect = (props) => {\r\n  // const { setupStream } = useContext(SocketContext);\r\n  // useEffect(() => {\r\n  //   setupStream()\r\n  // }, [])\r\n  return (\r\n    <div>\r\n      <Header {...props}/>\r\n\r\n      {/* Connect Section */}\r\n      <section className=\"connect-section\">\r\n        <h1>Connect with Us</h1>\r\n        <p>Learn how to connect with our services and start using WebRTC technology.</p>\r\n      </section>\r\n\r\n      {/* Footer */}\r\n      <Footer />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Connect;\r\n","import React, { useState } from 'react';\r\nimport '../styles/doc.css';\r\nimport Footer from './Footer';\r\nimport Header from './Header';\r\n\r\nconst Doc = (props) => {\r\n    const [activeIndex, setActiveIndex] = useState(null);\r\n\r\n    const toggleAccordion = (index) => {\r\n      setActiveIndex(activeIndex === index ? null : index);\r\n    };\r\n\r\n    const sections = [\r\n        {\r\n          title: \"1. Introduction to WebRTC\",\r\n          content: \"WebRTC (Web Real-Time Communication) enables peer-to-peer audio, video, and data sharing in modern browsers without the need for plugins.\",\r\n        },\r\n        {\r\n          title: \"2. Project Setup\",\r\n          content: (\r\n            <ol>\r\n              <li>Install Node.js and npm.</li>\r\n              <li>Install dependencies with <code>npm install</code>.</li>\r\n              <li>Run the server using <code>node server.js</code>.</li>\r\n            </ol>\r\n          ),\r\n        },\r\n        {\r\n          title: \"3. Starting a Video Call\",\r\n          content: \"Create a unique room ID and share it to initiate a real-time video call.\",\r\n        },\r\n        {\r\n          title: \"4. Troubleshooting\",\r\n          content: \"Ensure camera and microphone permissions are enabled. Clear browser cache if the issue persists.\",\r\n        },\r\n      ];\r\n\r\n  return (\r\n    <div>\r\n       <Header {...props} />\r\n\r\n      {/* Documentation Section */}\r\n      <section id=\"start\" className=\"documentation\">\r\n      <div className=\"doc-container\">\r\n        <h2>Documentation Overview</h2>\r\n\r\n        <div className=\"accordion\">\r\n          {sections.map((section, index) => (\r\n            <div key={index} className=\"accordion-item\">\r\n              <button className={`accordion-btn ${activeIndex === index ? \"active\" : \"\"}`} onClick={() => toggleAccordion(index)}>\r\n                {section.title}\r\n              </button>\r\n              <div className=\"accordion-content\" style={{ maxHeight: activeIndex === index ? \"100px\" : \"0\" }}>\r\n                <p>{section.content}</p>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </section>\r\n\r\n      {/* Footer */}\r\n      <Footer />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Doc;","import React from 'react';\r\nimport '../styles/demo.css';\r\nimport Footer from './Footer';\r\nimport Header from './Header';\r\n\r\nconst Demo = (props) => {\r\n  return (\r\n    <div>\r\n      <Header {...props} />\r\n\r\n      {/* Demo Section */}\r\n      <section className=\"demo-section\">\r\n        <h1>Demo</h1>\r\n        <p>Watch our demo to see WebRTC in action!</p>\r\n      </section>\r\n\r\n      {/* Footer */}\r\n      <Footer />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Demo;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { createRoom, getRoomDetails, getRooms } from \"../apis/roomApi\";\r\nimport { BiClipboard } from \"react-icons/bi\";\r\nimport useClipboard from \"react-use-clipboard\";\r\nimport Toast from 'light-toast';\r\n\r\nconst Li = ({ room, onRoomSelect }) => {\r\n  const [isCopied, setCopied] = useClipboard(room.roomId, {\r\n    successDuration: 1000,\r\n  });\r\n  return (\r\n    <li\r\n      key={room._id}\r\n      onClick={() => { onRoomSelect(room.roomId) }}\r\n      style={{\r\n        display: \"flex\",\r\n        justifyContent: \"space-between\",\r\n        alignItems: \"center\",\r\n        padding: \"15px\",\r\n        border: \"1px solid #ccc\",\r\n        borderRadius: \"5px\",\r\n        marginBottom: \"10px\",\r\n        cursor: \"pointer\",\r\n        backgroundColor: \"#f9f9f9\",\r\n      }}\r\n    >\r\n      <strong>{room.roomName}</strong>\r\n      <button style={{\r\n        width: \"80px\",\r\n        padding: \"10px\",\r\n        backgroundColor: \"blue\",\r\n        color: \"white\",\r\n        border: \"none\",\r\n        borderRadius: \"5px\",\r\n        cursor: \"pointer\",\r\n      }}\r\n        onClick={(e) => {\r\n          e.stopPropagation()\r\n          setCopied();\r\n        }}\r\n      >\r\n        <BiClipboard />\r\n        {isCopied && \" Copied\"}\r\n      </button>\r\n\r\n    </li>\r\n  )\r\n}\r\nconst RoomList = (props) => {\r\n  const [rooms, setRooms] = useState([]);\r\n  const [newRoomName, setNewRoomName] = useState(\"\");\r\n  const [joinRoomId, setJoinRoomId] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // Fetch the list of rooms\r\n  const onRoomSelect = (roomId) => {\r\n    props.history.push(`/room/${roomId}`);\r\n  };\r\n\r\n  const fetchRooms = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await getRooms();\r\n      setLoading(false);\r\n      if (response && response.length) {\r\n        setRooms(response);\r\n      } else {\r\n        setRooms([]);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error fetching rooms:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Create a new room\r\n  const createRoomClick = async () => {\r\n    if (!newRoomName.trim()) return;\r\n    try {\r\n      const response = await createRoom(newRoomName);\r\n      if (response?.room) {\r\n        setRooms((prevRooms) => [...prevRooms, response.room]);\r\n      }\r\n      setNewRoomName(\"\");\r\n    } catch (error) {\r\n      console.error(\"Error creating room:\", error);\r\n    }\r\n  };\r\n\r\n  // Load rooms on component mount\r\n  useEffect(() => {\r\n    fetchRooms();\r\n  }, []);\r\n\r\n  const handleJoinRoom = async () => {\r\n    let details = await getRoomDetails(joinRoomId);\r\n    if(details && details.room && details.room.roomId == joinRoomId) {\r\n      props.history.push(`/room/${details.room.roomId}`);\r\n    } else {\r\n      Toast.fail(\"Invalid Room Id\", 3000, () => {});\r\n    }\r\n\r\n  }\r\n\r\n  return (\r\n    <div style={{ display: \"flex\", \"alignItems\": \"center\", justifyContent: \"space-evenly\" }}>\r\n      <div></div>\r\n      <div>\r\n        <div style={{ padding: \"20px\", maxWidth: \"400px\", margin: \"auto\" }}>\r\n          <h2 style={{ textAlign: \"center\", marginBottom: \"20px\" }}>Room List</h2>\r\n\r\n          <div style={{ marginBottom: \"20px\" }}>\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Enter room name\"\r\n              value={newRoomName}\r\n              onChange={(e) => setNewRoomName(e.target.value)}\r\n              style={{\r\n                width: \"100%\",\r\n                padding: \"10px\",\r\n                marginBottom: \"10px\",\r\n                border: \"1px solid #ccc\",\r\n                borderRadius: \"5px\",\r\n              }}\r\n            />\r\n            <button\r\n              onClick={createRoomClick}\r\n              style={{\r\n                width: \"100%\",\r\n                padding: \"10px\",\r\n                backgroundColor: \"blue\",\r\n                color: \"white\",\r\n                border: \"none\",\r\n                borderRadius: \"5px\",\r\n                cursor: \"pointer\",\r\n              }}\r\n            >\r\n              Create New Room\r\n            </button>\r\n          </div>\r\n\r\n          {loading ? (\r\n            <div style={{ textAlign: \"center\" }}>\r\n              <span>Loading...</span>\r\n            </div>\r\n          ) : (\r\n            <ul style={{ listStyle: \"none\", padding: \"0\" }}>\r\n              {rooms.map((room) => (\r\n                <Li onRoomSelect={onRoomSelect} room={room} />\r\n              ))}\r\n            </ul>\r\n          )}\r\n        </div>\r\n      </div>\r\n      <div>\r\n        <input style={{\r\n          borderRadius: \"5px\",\r\n          height: \"36px\",\r\n          marginRight: \"3px\",\r\n          paddingLeft: \"5px\"\r\n        }} value={joinRoomId} onChange={(e) => setJoinRoomId(e.target.value)} type=\"text\" placeholder=\"Enter Room Id\"/>\r\n        <button style={{\r\n          width: \"100px\",\r\n          padding: \"10px\",\r\n          backgroundColor: \"blue\",\r\n          color: \"white\",\r\n          border: \"none\",\r\n          borderRadius: \"5px\",\r\n          cursor: \"pointer\",\r\n        }}\r\n          onClick={(e) => {\r\n            e.stopPropagation()\r\n            handleJoinRoom();\r\n\r\n          }}\r\n        >\r\n          Join Room\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RoomList;\r\n","import API from \"./axiosConfig\";\r\n\r\nexport const createRoom = async (roomName) => {\r\n  try {\r\n    const response = await API.post(\r\n      \"rooms/create\",\r\n      { roomName },\r\n    );\r\n    if(response.status == 200 && response.data) {\r\n      return response.data\r\n    }\r\n    console.log(\"Room created successfully:\", response.data);\r\n  } catch (error) {\r\n    console.error(\"Error creating room:\", error);\r\n  }\r\n};\r\n\r\nexport const getRooms = async () => {\r\n  try {\r\n    const response = await API.get(\r\n      \"rooms\"\r\n    );\r\n    if(response.status == 200 && response.data) {\r\n      return response.data\r\n    }\r\n  } catch (error) {\r\n    console.error(\"Error creating room:\", error);\r\n  }\r\n};\r\n\r\nexport const getRoomDetails = async (roomId) => {\r\n  try {\r\n    const response = await API.get(\r\n      `rooms/${roomId}`\r\n    );\r\n    if(response.status == 200 && response.data) {\r\n      return response.data\r\n    }\r\n    return false\r\n  } catch (error) {\r\n    console.error(\"Error creating room:\", error);\r\n    return false\r\n  }\r\n};\r\n\r\nexport const fetchAllUsersInRoom = async (roomID) => {\r\n  try {\r\n    const response = await API.get(\r\n      `room/${roomID}`\r\n    );\r\n    if(response.status == 200 && response.data) {\r\n      return response.data\r\n    }\r\n  } catch (error) {\r\n    console.error(\"Error creating room:\", error);\r\n  }\r\n};\r\n\r\n\r\n\r\nexport const deleteRoom = async (roomId, token) => {\r\n    try {\r\n      const response = await API.delete(\r\n        \"rooms\",\r\n        { roomId },\r\n        {\r\n          headers: {\r\n            Authorization: token, // Include the JWT token in headers\r\n          },\r\n        }\r\n      );\r\n      console.log(\"Room created successfully:\", response.data);\r\n    } catch (error) {\r\n      console.error(\"Error creating room:\", error);\r\n    }\r\n  };\r\n  \r\n","import React from 'react';\r\nimport Footer from './Footer';\r\nimport Header from './Header';\r\nimport RoomList from './RoomList';\r\n\r\nconst Rooms = (props) => {\r\n  return (\r\n    <div>\r\n     <Header {...props} />\r\n        <RoomList {...props} />\r\n      <Footer />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Rooms;\r\n","import React from 'react';\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport { validateTicket } from \"../apis/authApis\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nconst ProtectedRoute = ({ component: Component, ...rest }) => {\r\n  const [isAuthenticated, setIsAuthenticated] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const checkAuth = async () => {\r\n      const isValid = await validateTicket();\r\n      setIsAuthenticated(isValid);\r\n    };\r\n    checkAuth();\r\n  }, []);\r\n\r\n  if (isAuthenticated === null) return <p>Loading...</p>;\r\n\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={(props) =>\r\n        isAuthenticated ? <Component {...props} /> : <Redirect to=\"/login\" />\r\n      }\r\n    />\r\n  );\r\n};\r\n\r\nexport default ProtectedRoute;\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\nimport io from \"socket.io-client\";\r\nimport Peer from \"simple-peer\";\r\nimport styled from \"styled-components\";\r\nimport { jwtDecode } from \"jwt-decode\";\r\nimport micmute from \"../assets/micmute.svg\";\r\nimport micunmute from \"../assets/micunmute.svg\";\r\nimport webcam from \"../assets/webcam.svg\";\r\nimport webcamoff from \"../assets/webcamoff.svg\";\r\nimport endcall from \"../assets/end-call-icon.svg\";\r\nimport Header from \"../components/Header\";\r\nimport Footer from \"../components/Footer\";\r\nimport { fetchUsers } from \"../apis/authApis\";\r\nimport { fetchAllUsersInRoom } from \"../apis/roomApi\";\r\nimport axios from \"axios\";\r\n\r\nconst Container = styled.div`\r\n`;\r\n\r\nconst MainContainer = styled.div`\r\n  height: 100vh;\r\n  width: 100%;\r\n`;\r\n\r\nconst Controls = styled.div`\r\n  position: fixed;\r\n  bottom: 0;\r\n  width: 100%;\r\n  background-color: rgba(0, 0, 0, 0.4);\r\n  filter: brightness(1);\r\n  z-index: 1;\r\n  border-radius: 6px;\r\n  gap: 24px;\r\n  display: flex;\r\n  height: 68px;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n`;\r\n\r\nconst ControlSmall = styled.div`\r\n  margin: 3px;\r\n  padding: 5px;\r\n  height: 16px;\r\n  width: 98%;\r\n  margin-top: -6vh;\r\n  filter: brightness(1);\r\n  z-index: 1;\r\n  border-radius: 6px;\r\n  display: flex;\r\n  justify-content: center;\r\n`;\r\n\r\nconst ImgComponent = styled.img`\r\n  cursor: pointer;\r\n  height: 40px;\r\n  width: 40px;\r\n`;\r\n\r\nconst ImgComponentSmall = styled.img`\r\n  height: 15px;\r\n  text-align: left;\r\n  opacity: 0.5;\r\n`;\r\n\r\nconst MyVideoContainer = styled.div`\r\n    z-index: 2;\r\n    bottom: 0;\r\n    height: 130px;\r\n    position: fixed;\r\n    width: 200px;\r\n`\r\n\r\nconst StyledVideo = styled.video`\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: cover;\r\n  border-radius: 10px;\r\n  border: 3px solid gray;\r\n  background-color: black;\r\n`;\r\n\r\n\r\nconst VideoGrid = styled.div`\r\n  display: grid;\r\n  width: 100vw;\r\n  height: 80vh;\r\n  gap: 10px;\r\n  padding: 10px;\r\n  grid-template-columns: ${({ count }) => `repeat(${count > 2 ? 2 : count}, 1fr)`};\r\n  grid-template-rows: ${({ count }) => `repeat(${Math.ceil(count / 2)}, 1fr)`};\r\n`;\r\n\r\nconst Video = (props) => {\r\n  const ref = useRef();\r\n\r\n  useEffect(() => {\r\n    props.peer.on(\"stream\", (stream) => {\r\n      ref.current.srcObject = stream;\r\n    });\r\n  }, []);\r\n\r\n  return <StyledVideo playsInline autoPlay ref={ref} {...props} />;\r\n};\r\n\r\nconst RoomCopy = (props) => {\r\n  let isVideo = true;\r\n  let userVideosArray = [];\r\n  const [hasVideo, setHasVideo] = useState(true);\r\n  const [user, setUser] = useState(null);\r\n  const [users, setUsers] = useState([]);\r\n  const [peers, setPeers] = useState([]);\r\n  const [usersInRoom, setUsersInRoom] = useState([]);\r\n  const [audioFlag, setAudioFlag] = useState(true);\r\n  const [videoFlag, setVideoFlag] = useState(true);\r\n  const [userUpdate, setUserUpdate] = useState([]);\r\n  const socketRef = useRef();\r\n  const userVideo = useRef();\r\n  const streamRef = useRef();\r\n  const peersRef = useRef([]);\r\n  const roomID = props.match.params.roomID;\r\n  const videoConstraints = {\r\n    minAspectRatio: 1.333,\r\n    minFrameRate: 60,\r\n    height: window.innerHeight / 1.8,\r\n    width: window.innerWidth / 2,\r\n  };\r\n  async function getCameras() {\r\n    const devices = await navigator.mediaDevices.enumerateDevices();\r\n    return devices.filter(device => device.kind === \"videoinput\");\r\n  }\r\n  const fetchWeather = async (user) => {\r\n    try {\r\n      const response = await axios.get(\r\n        `https://api.openweathermap.org/data/2.5/weather?q=${user?.city || \"Islamabad\"}&units=metric&appid=37e78c3096e576c4b3758d158358e03b`\r\n      );\r\n      if (response?.data?.main) {\r\n        return { temp: response.data.main.temp, humidity: response.data.main.humidity }\r\n      }\r\n      return false;\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  };\r\n  const fetchRoomUsers = async () => {\r\n    const res = await fetchAllUsersInRoom(roomID);\r\n    console.log(res)\r\n    if (res && res.users) {\r\n      setUsersInRoom(res.users);\r\n    }\r\n  }\r\n  const fetchAllUser = async () => {\r\n    const res = await fetchUsers();\r\n    if (res && res.users) {\r\n      let resUsers = JSON.parse(JSON.stringify(res.users));\r\n      resUsers.forEach(async (user) => {\r\n        let weather = await fetchWeather(user);\r\n        if (weather) {\r\n          user.temp = weather.temp;\r\n          user.humidity = weather.humidity\r\n        }\r\n      })\r\n      setUsers(resUsers);\r\n    }\r\n  }\r\n  useEffect(() => {\r\n    fetchRoomUsers();\r\n  }, [peers])\r\n  useEffect(() => {\r\n    socketRef.current = io.connect(\"/\");\r\n    const token = localStorage.getItem(\"authTicket\");\r\n\r\n    if (token) {\r\n      try {\r\n        const decodedUser = jwtDecode(token);\r\n        setUser(decodedUser);\r\n        createStream(decodedUser);\r\n      } catch (error) {\r\n        console.error(\"Invalid token:\", error);\r\n        setUser(null);\r\n      }\r\n\r\n    }\r\n    fetchAllUser();\r\n    return () => {\r\n      streamRef.current.getTracks().forEach(function (track) {\r\n        track.stop();\r\n      });\r\n      socketRef.current.disconnect()\r\n    }\r\n  }, []);\r\n\r\n  const getCanvasStream = (dUser) => {\r\n    const canvas = document.getElementById(\"canvas\");\r\n    const ctx = canvas.getContext(\"2d\");\r\n\r\n    function drawText() {\r\n      // Clear canvas\r\n      ctx.fillStyle = \"black\";\r\n      ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n\r\n      // Set text style\r\n      ctx.font = \"40px Arial\";\r\n      ctx.fillStyle = \"red\";\r\n      ctx.textAlign = \"center\";\r\n      ctx.textBaseline = \"middle\";\r\n\r\n      // Draw username text\r\n      ctx.fillText(dUser.username, canvas.width / 2, canvas.height / 2);\r\n    }\r\n    drawText();\r\n    setInterval(drawText, 100);\r\n\r\n    // Create a fake video stream from the canvas\r\n    const stream = canvas.captureStream(30); // 30 FPS\r\n\r\n    return stream;\r\n  }\r\n  const getAudioStream = async (dUser) => {\r\n    try {\r\n      const stream = await navigator.mediaDevices.getUserMedia({ video: false, audio: true });\r\n      return stream;\r\n\r\n    } catch (err) {\r\n      const canvasStream = getCanvasStream(dUser);\r\n      const audioStream = await navigator.mediaDevices.getUserMedia({ audio: true });\r\n\r\n      // Create a new MediaStream and add video + audio tracks\r\n      const finalStream = new MediaStream([\r\n        ...canvasStream.getVideoTracks(),\r\n        ...audioStream.getAudioTracks()\r\n      ]);\r\n      return finalStream;\r\n    }\r\n  }\r\n  const getStream = async (dUser) => {\r\n    try {\r\n      const stream = await navigator.mediaDevices.getUserMedia({ video: videoConstraints, audio: true });\r\n      return stream;\r\n\r\n    } catch (err) {\r\n      isVideo = false;\r\n      const stream = getAudioStream(dUser);\r\n      return stream;\r\n    }\r\n  }\r\n\r\n  const createStream = async (dUser) => {\r\n    const cameraList = await getCameras()\r\n    console.log(cameraList);\r\n    const stream = await getStream(dUser);\r\n    streamRef.current = stream\r\n    userVideo.current.srcObject = stream;\r\n    setHasVideo(isVideo)\r\n    socketRef.current.emit(\"join room\", { roomID, username: dUser.username, isVideo });\r\n    socketRef.current.on(\"all users\", (users) => {\r\n      const peers = [];\r\n      users.forEach((socketUser) => {\r\n        let userID = socketUser.socketId;\r\n        const peer = createPeer(userID, socketRef.current.id, stream);\r\n        peersRef.current.push({\r\n          peerID: userID,\r\n          peer\r\n        });\r\n        let index = peers.findIndex((x) => x.peerID == userID);\r\n        if (index == -1) {\r\n          peers.push({\r\n            peerID: userID,\r\n            peer\r\n          });\r\n        }\r\n      });\r\n      setPeers(peers);\r\n    });\r\n    socketRef.current.on(\"user joined\", (payload) => {\r\n      const peer = addPeer(payload.signal, payload.callerID, stream);\r\n      peersRef.current.push({\r\n        peerID: payload.callerID,\r\n        peer\r\n      });\r\n      const peerObj = {\r\n        peer,\r\n        peerID: payload.callerID\r\n      };\r\n      let index = peers.findIndex((x) => x.peerID == payload.callerID);\r\n      if (index == -1) {\r\n        setPeers((users) => [...users, peerObj]);\r\n      }\r\n    });\r\n\r\n    socketRef.current.on(\"user left\", (id) => {\r\n      console.log(\"========== user left ===========\")\r\n      const peerObj = peersRef.current.find((p) => p.peerID === id);\r\n      if (peerObj) {\r\n        peerObj.peer.destroy();\r\n      }\r\n      const peers = peersRef.current.filter((p) => p.peerID !== id);\r\n      peersRef.current = peers;\r\n      setPeers(peers);\r\n    });\r\n\r\n    socketRef.current.on(\"receiving returned signal\", (payload) => {\r\n      const item = peersRef.current.find((p) => p.peerID === payload.id);\r\n      item.peer.signal(payload.signal);\r\n    });\r\n\r\n    socketRef.current.on(\"change\", (payload) => {\r\n      console.log(payload)\r\n      setUserUpdate(payload);\r\n    });\r\n  }\r\n\r\n  function createPeer(userToSignal, callerID, stream) {\r\n    const peer = new Peer({\r\n      initiator: true,\r\n      trickle: false,\r\n      stream,\r\n    });\r\n\r\n    peer.on(\"signal\", (signal) => {\r\n      socketRef.current.emit(\"sending signal\", {\r\n        userToSignal,\r\n        callerID,\r\n        signal,\r\n        roomID\r\n      });\r\n    });\r\n\r\n    return peer;\r\n  }\r\n\r\n  function addPeer(incomingSignal, callerID, stream) {\r\n    const peer = new Peer({\r\n      initiator: false,\r\n      trickle: false,\r\n      stream,\r\n    });\r\n\r\n    peer.on(\"signal\", (signal) => {\r\n      socketRef.current.emit(\"returning signal\", { signal, callerID, roomID });\r\n    });\r\n\r\n    peer.signal(incomingSignal);\r\n\r\n    return peer;\r\n  }\r\n\r\n  const endCallClick = () => {\r\n    streamRef.current.getTracks().forEach(function (track) {\r\n      track.stop();\r\n    });\r\n    socketRef.current.disconnect();\r\n    const userIndex = usersInRoom.findIndex((x) => x.username == user.username);\r\n    if (userIndex > -1) {\r\n      console.log(usersInRoom[userIndex])\r\n      if(usersInRoom[userIndex].peer) {\r\n        usersInRoom[userIndex].peer.destroy()\r\n      }\r\n    }\r\n    props.history.push('/rooms')\r\n  }\r\n\r\n  const getVideoGrid = (newPeers) => {\r\n    const uniquePeers = Array.from(\r\n      new Map(newPeers.map((peer) => [peer.peerID, peer])).values()\r\n    );\r\n    return (\r\n      <VideoGrid count={uniquePeers.length}>\r\n        {newPeers.map((peer, index) => {\r\n          if (index == 0) {\r\n            userVideosArray = []\r\n          }\r\n          let audioFlagTemp = true;\r\n          let videoFlagTemp = true;\r\n          if (userUpdate) {\r\n            userUpdate.forEach((entry) => {\r\n              if (peer && peer.peerID && peer.peerID === entry.id) {\r\n                audioFlagTemp = entry.audioFlag;\r\n                videoFlagTemp = entry.videoFlag;\r\n              }\r\n            });\r\n          }\r\n          let videoIndex = userVideosArray.findIndex((x) => x == peer.peerID);\r\n          if (videoIndex > -1) {\r\n            return null;\r\n          }\r\n\r\n          const userIndex = usersInRoom.findIndex((x) => x.socketId == peer.peerID);\r\n          console.log(\"================ user ===============\")\r\n          console.log(usersInRoom[userIndex])\r\n\r\n          let userDetailIndex = -1\r\n          if (userIndex > -1) {\r\n            userDetailIndex = users.findIndex((x) => x.username == usersInRoom[userIndex].username)\r\n          }\r\n\r\n          userVideosArray.push(peer.peerID);\r\n          return (\r\n            <div style={{\r\n              width: \"100%\",\r\n              height: \"100%\",\r\n              position: \"relative\",\r\n              borderRadius: \"10px\",\r\n              overflow: \"hidden\",\r\n            }} id={peer.peerID} key={peer.peerID}>\r\n              <div className=\"video-top-bar\" style={{ position: \"absolute\", top: \"0\", background: \"rgba(255,255,255,0.6)\" }}>\r\n                <span>{userDetailIndex > -1 ? users[userDetailIndex].username : \"Unknown\"}</span>\r\n                <span>📌{userDetailIndex > -1 ? users[userDetailIndex].city : ''} </span>\r\n                <span> 🌡️ {userDetailIndex > -1 ? users[userDetailIndex].temp : ''}°C </span>\r\n                <span> 💧 {userDetailIndex > -1 ? users[userDetailIndex].humidity : ''}°C </span>\r\n                <span></span>\r\n              </div>\r\n              <Video style={{ display: usersInRoom[userIndex] && usersInRoom[userIndex].isVideo ? \"block\" : \"none\" }} peer={peer.peer} />\r\n              <div style={{ alignItems: \"center\", justifyContent: \"center\", height: \"100%\", width: \"100%\", backgroundColor: \"black\", color: \"white\", fontSize: \"20px\", fontWeight: \"bold\", display: usersInRoom[userIndex] && usersInRoom[userIndex].isVideo ? \"none\" : \"flex\" }}>Audio Only</div>\r\n            </div>\r\n          );\r\n        })}\r\n      </VideoGrid>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <MainContainer>\r\n      <Header {...props} />\r\n      <Container>\r\n        <MyVideoContainer >\r\n          <StyledVideo style={{ display: hasVideo ? \"block\" : \"none\" }} muted ref={userVideo} autoPlay playsInline />\r\n          <div style={{ alignItems: \"center\", justifyContent: \"center\", height: \"100%\", width: \"100%\", backgroundColor: \"black\", color: \"white\", fontSize: \"20px\", fontWeight: \"bold\", display: hasVideo ? \"none\" : \"flex\" }}>Audio Only</div>\r\n        </MyVideoContainer>\r\n        {peers.length > 0 ? getVideoGrid(peers) : <div style={{ display: 'flex', alignItems: \"center\", justifyContent: \"center\" }}><p>Waiting for participants...</p></div>}\r\n        <Controls>\r\n          <ImgComponent\r\n            src={videoFlag ? webcam : webcamoff}\r\n            onClick={() => {\r\n              if (userVideo.current.srcObject) {\r\n                userVideo.current.srcObject.getTracks().forEach(function (track) {\r\n                  if (track.kind === \"video\") {\r\n                    if (track.enabled) {\r\n                      socketRef.current.emit(\"change\", [...userUpdate, {\r\n                        id: socketRef.current.id,\r\n                        videoFlag: false,\r\n                        audioFlag,\r\n                      }]);\r\n                      track.enabled = false;\r\n                      setVideoFlag(false);\r\n                    } else {\r\n                      socketRef.current.emit(\"change\", [...userUpdate, {\r\n                        id: socketRef.current.id,\r\n                        videoFlag: true,\r\n                        audioFlag,\r\n                      }]);\r\n                      track.enabled = true;\r\n                      setVideoFlag(true);\r\n                    }\r\n                  }\r\n                });\r\n              }\r\n            }}\r\n          />\r\n          <ImgComponent\r\n            src={audioFlag ? micunmute : micmute}\r\n            onClick={() => {\r\n              if (userVideo.current.srcObject) {\r\n                userVideo.current.srcObject.getTracks().forEach(function (track) {\r\n                  if (track.kind === \"audio\") {\r\n                    if (track.enabled) {\r\n                      socketRef.current.emit(\"change\", [...userUpdate, {\r\n                        id: socketRef.current.id,\r\n                        videoFlag,\r\n                        audioFlag: false,\r\n                      }]);\r\n                      track.enabled = false;\r\n                      setAudioFlag(false);\r\n                    } else {\r\n                      socketRef.current.emit(\"change\", [...userUpdate, {\r\n                        id: socketRef.current.id,\r\n                        videoFlag,\r\n                        audioFlag: true,\r\n                      }]);\r\n                      track.enabled = true;\r\n                      setAudioFlag(true);\r\n                    }\r\n                  }\r\n                });\r\n              }\r\n            }}\r\n          />\r\n          <ImgComponent\r\n            src={endcall}\r\n            onClick={() => {\r\n              endCallClick();\r\n            }}\r\n          />\r\n        </Controls>\r\n      </Container>\r\n      <canvas id=\"canvas\" width=\"640\" height=\"480\" style={{ display: \"none\" }}></canvas>\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nexport default RoomCopy;\r\n","import React from 'react';\r\nimport { BrowserRouter, Route, Switch } from \"react-router-dom\";\r\nimport Room from \"./routes/Room\";\r\nimport WebRTC from './components/WebRTC';\r\nimport Login from './components/Login';\r\nimport Reg from './components/Reg';\r\nimport AboutUs from './components/AboutUs';\r\nimport Connect from './components/Connect';\r\nimport Doc from './components/Doc';\r\nimport Demo from './components/Demo';\r\nimport './App.css';\r\nimport Rooms from './components/Rooms';\r\nimport ProtectedRoute from './utils/ProtectedRoute';\r\nimport RoomCopy from './routes/RoomCopy';\r\n\r\nfunction App() {\r\n  return (\r\n    <BrowserRouter>\r\n      <Switch>\r\n        <Route path=\"/login\" component={Login} />\r\n        <Route path=\"/register\" component={Reg} />\r\n        <Route path=\"/aboutus\" component={AboutUs} />\r\n        <Route path=\"/connect\" component={Connect} />\r\n        <Route path=\"/doc\" component={Doc} />\r\n        <Route path=\"/demo\" component={Demo} />\r\n        <ProtectedRoute path=\"/room/:roomID\" component={RoomCopy} />\r\n        <ProtectedRoute path=\"/rooms\" component={Rooms} />\r\n        <Route path=\"/\" component={WebRTC} />\r\n      </Switch>\r\n    </BrowserRouter>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n","module.exports = __webpack_public_path__ + \"static/media/micmute.22ed48be.svg\";","module.exports = __webpack_public_path__ + \"static/media/micunmute.aff35866.svg\";","module.exports = __webpack_public_path__ + \"static/media/webcam.9f0afb70.svg\";","module.exports = __webpack_public_path__ + \"static/media/webcamoff.fe3df939.svg\";","module.exports = __webpack_public_path__ + \"static/media/end-call-icon.bb70e485.svg\";"],"sourceRoot":""}